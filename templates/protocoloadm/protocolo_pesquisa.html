{% extends "protocoloadm/protocoloadm_detail.html" %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block detail_content %}
	<form method="post">
		{% csrf_token %}
		<fieldset>
		<legend>Pesquisa Avançada</legend>
			<ul class="small-block-grid-2 medium-block-grid-2 large-block-grid-2">
				<li>Tipo Protocolo</li>
				<li>
					<select name="tipo_protocolo">
						<option value="">Selecione</option>
						<option value="0">Enviado</option>
						<option value="1">Recebido</option>
					</select>
				</li>
			</ul>
			<ul class="small-block-grid-2 medium-block-grid-2 large-block-grid-2">
				<li>Número Protocolo</li>
				<li><input type="text" name="numero_protocolo" /></li>
			</ul>
			<ul class="small-block-grid-2 medium-block-grid-2 large-block-grid-2">
				<li>Ano</li>
				<li><input type="text" name="ano" /></li>
			</ul>
			<ul class="small-block-grid-1 medium-block-grid-1 large-block-grid-1">
				<li><b>Período Protocolo</b></li>
			</ul>
			<ul class="small-block-grid-2 medium-block-grid-2 large-block-grid-2">
				<li>Inicial</li>
				<li><input type="text" name="inicial" class="dateinput" /></li>
			</ul>
			<ul class="small-block-grid-2 medium-block-grid-2 large-block-grid-2">
				<li>Final</li>
				<li><input type="text" name="final" class="dateinput" /></li>
			</ul>
			<ul class="small-block-grid-2 medium-block-grid-2 large-block-grid-2">
				<li>Tipo Documento</li>
				<li>
					<select name="tipo_documento">
						<option value="">Selecione</option>
						{% for tipo in view.get_tipo_documento %}
							<option value="{{tipo.id}}">{{tipo.sigla}} - {{tipo.descricao}}</option>
						{% endfor %}
					</select>
				</li>
			</ul>
			<ul class="small-block-grid-2 medium-block-grid-2 large-block-grid-2">
				<li>Interessado</li>
				<li><input type="text" name="interessado" /></li>
			</ul>
			<ul class="small-block-grid-2 medium-block-grid-2 large-block-grid-2">
				<li>Tipo Matéria</li>
				<li>
					<select name="tipo_materia">
						<option value="">Selecione</option>
						{% for tipo in view.get_tipo_materia %}
							<option value="{{tipo.id}}">{{tipo.sigla}} - {{tipo.descricao}}</option>
						{% endfor %}
					</select>
				</li>
			</ul>
			<ul class="small-block-grid-2 medium-block-grid-2 large-block-grid-2">
				<li>Autor</li>
				<li><input type="text" name="autor" /></li>
			</ul>
			<ul class="small-block-grid-2 medium-block-grid-2 large-block-grid-2">
				<li>Assunto</li>
				<li><input type="text" name="assunto" /></li>
			</ul>
			<br />
			<input type="submit" value="Pesquisar" class="button primary"/>
		</fieldset>
<!-- 
		{% if protocolos %}		
		<table>
			<tr><td>Número de Protocolo</td>
				<td>Assunto</td>
				<td>Tipo de Documento</td>
				<td>Ano</td>
				<td>Data</td>
			</tr>
			{% for p in protocolos %}
				<tr><td>{{ p.numero }}</td>
					<td>{{ p.ano }}</td>					
					<td>{{ p.assunto_ementa }}</td>
					<td>{{ p.tipo_documento }}</td>
					<td>{{ p.data|date:"d/m/Y" }}</td>
				</tr>
			{% endfor %}
		</table>

   {% if is_paginated %}
        <div class="pagination">
            <span class="page-links">
                {% if page_obj.has_previous %}
                    <a href="{% url 'protocolo' %}{?page={{ page_obj.previous_page_number }}"><<</a>
                {% endif %}
                <span class="page-current">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                </span>
                {% if page_obj.has_next %}
                    <a href="{% url 'protocolo' %}/?page={{ page_obj.next_page_number }}">>></a>
                {% endif %}
            </span>
        </div>
    {% endif %} 

		Total: {{ protocolos|length }} 
		{% endif %}
		-->
	</form>
{% endblock detail_content %}

{% block foot_js %}
   <script type="text/javascript">
    	$(function () {
			$('.dateinput').fdatepicker({
				// TODO localize
				format: 'dd/mm/yyyy',
				language: 'pt',
				endDate: '31/12/2100',
				todayBtn: true
			});
		});
	</script>
{% endblock %}